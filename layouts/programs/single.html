{{ define "main" }}

<!-- section -->
<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-12 mb-4">
        <h1 class="h2">{{ with .Params.h1 }}{{ . }}{{ else }}{{ .Title }}{{ end }}</h1>
      </div>
      {{ if .Params.image }}
        {{ $image := .Resources.GetMatch .Params.image }}
        <div class="col-12 mb-4">
        {{ if $image }}
            <img src="{{ $image.Permalink }}" alt="{{ with .Params.h1 }}{{ . }}{{ else }}{{ .Title }}{{ end }}" class="img-fluid w-100">
        {{ else }}
            {{ partial "image.html" (dict "Src" .Params.image "Alt" "Image" "Class" "img-fluid w-100") }}
        {{ end }}
        </div>
      {{ end}}
    </div>
    <!-- details -->
    <div class="row">
      <div class="col-lg-9 order-2 order-md-1 mb-4 content">
        {{ .Content }}
      </div>
      <div class="toc-sticky col-lg-3 order-1 order-md-2 d-none d-lg-block shadow pt-4">
        {{ partial "toc.html" . }}
        <button class="openFormBtn btn btn-primary mt-4">Подать заявку</button>
      </div>
      <!-- teacher -->
      {{ if .Params.Teacher }}
      <div class="col-12 order-3">
        <h5 class="mb-3">Преподователи</h5>
        {{ range where site.RegularPages "Title" (.Params.Teacher | title) }}
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <div class="media mb-2 mb-sm-0 align-items-center">
            {{ partial "image.html" (dict "Src" .Params.image "Alt" .Title "Class" "mr-4 img-fluid teacher-thumb-sm") }}
            <div class="media-body">
              <h4 class="mt-0"><a href="{{ .Permalink }}">{{ .Title }}</a></h4>
              {{ .Params.Course }}
            </div>
          </div>
          <div class="social-link">
            <h6 class="d-none d-sm-block text-right">Контакты</h6>
            <ul class="list-inline">
              {{ range .Params.Contact }}
              <li class="list-inline-item"><a class="d-inline-block text-light p-1" href="{{ .link | safeURL }}"><i class="{{ .icon }}"></i></a></li>
              {{ end }}
            </ul>
          </div>
        </div>
        {{ end }}
        <div class="border-bottom border-primary mt-4"></div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
<!-- /section -->

<!-- related course -->
<section class="section pt-0">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title">Другие</h2>
      </div>
    </div>
    <div class="row">
      <!-- course item -->
      {{ $related := (where site.RegularPages "Type" "programs") | intersect (where site.Pages ".Title" "!=" .Title) | union (site.RegularPages.Related . ) | shuffle | first 3}}
      {{ range first 3 $related }}
      <div class="col-lg-4 col-sm-6 mb-5">
        {{ partial "programs-card.html" . }}
      </div>
      {{ end }}
    </div>
  </div>
</section>
<!-- /related course -->

{{ end }}
